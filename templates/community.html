{% extends 'base.html' %}
<!-- community_name is the object we got in our route -->
  {% block title%}
  <div class="community_title">
     <h1 class = "community_name"> k/ {{ community.community_name }}</h1> 
     <small class="members_count">{{ members_count }} members</small>
  </div>
  <br>
  <div>
    
    <!-- Create a Post -->
    <a class='btn btn-primary' href="/k/{{ community.community_name }}/post/new" role='button'>Create Post</a>
  </div><br>
  {% endblock %}

{% block content %}

<!--  -->


  <!-- Display Posts -->
  {% for post in posts %}
  <h1>{{post.id}}
  </h1>
  <input type="hidden" id="post_id" name="post_id" value="{{post.id}}">
       <input type="hidden" id="community_name" name="community_name" value="{{community.community_name}}">
    <article class="media content-section">
        <!-- Upvotes/Downvotes -->
          <div class="vote-container">
            <div class="up_post_list"><a href="/k/{{community.community_name}}/posts/{{post.id}}/upvote"><i data-id ="{{post.id}}" class="upvote fas fa-arrow-alt-circle-up fa-2x"></i></a></div>
            <div class="votecount" id="votecount{{post.id}}"> {{votes[loop.index0]}} </div>
            <div class="down_post_list"><a href="/k/{{community.community_name}}/posts/{{post.id}}/downvote"><i class="downvote fas fa-arrow-alt-circle-down fa-2x"></i></a></div>
          </div>

      <img class="rounded-circle article-img" src="{{ url_for('static', filename='images/' + post.creator.image_file) }}">
      <div class="media-body">
        <div class="article-metadata">
          <a class="mr-2" href="{{ url_for('user_account', username=post.creator.username) }}">{{ post.creator.username }}</a>
          <small class="text-muted">{{ post.date.strftime('%Y-%m-%d') }}</small>
        </div>
        <!-- Link post title to post link -->
        <h2><a class="article-title" href="/k/{{ community.community_name }}/post/{{post.id}}">{{ post.title }}</a></h2>
        <p class="article-content">{{ post.body }}</p>
         <p><small class="text-muted"><i class="comments far fa-comment-dots"></i> {{comments[loop.index0]}} Comments</small>

      </div>
    </article>
      
  {% endfor %}

  
{% endblock %}